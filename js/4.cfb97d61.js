(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"6a82":function(t,e,s){t.exports=s.p+"img/coracao.026e808e.svg"},"74ec":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"flex items-center justify-center cover",style:{backgroundImage:"url("+t.pet.url_capa+")"}},[a("img",{staticClass:"profile-picture",attrs:{alt:"Foto do Perfil",src:t.pet.url_foto}})]),a("div",{staticClass:"q-px-lg q-mb-lg"},[a("h4",{staticClass:"text-center"},[t._v(t._s(t.pet.nome))]),a("article",{staticClass:"text-center"},[t._v("\n        "+t._s(t.pet.descricao)+"\n    ")]),a("q-expansion-item",{attrs:{"expand-separator":"",icon:"add",label:"Mais informações"},on:{"before-show":t.buscarDetalhes}},[t.detalhesPet&&!t.loadingDetalhes?a("q-card",[a("q-card-section",[a("q-list",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"pets"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.detalhesPet.animal)+", "+t._s(t.detalhesPet.raca)+" ")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"color_lens"}})],1),a("q-item-section",[a("q-item-label",[t._v(" "+t._s(t.detalhesPet.cor)+" ")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"cake"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.detalhesPet.idade)+" anos")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"wc"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s("M"===t.detalhesPet.sexo?"Macho":"Fêmea"))])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"straighten"}})],1),a("q-item-section",[a("q-item-label",[t._v("Largura "+t._s(t.detalhesPet.largura)+" cm Comprimento "+t._s(t.detalhesPet.comprimento)+" cm")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"fiber_manual_record"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.detalhesPet.peso)+" kg")])],1)],1),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"room"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(t.detalhesPet.cidade)+", "+t._s(t.detalhesPet.estado))])],1)],1)],1)],1)],1):t._e(),a("q-inner-loading",{attrs:{showing:t.loadingDetalhes}},[a("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1),a("div",{staticClass:"q-my-lg text-center"},[t.pet.seguindo?a("q-btn",{staticClass:"q-mt-sm button-main text-primary",attrs:{rounded:"",outline:"",label:"Seguindo"},on:{click:t.unfollow}}):a("q-btn",{staticClass:"q-mt-sm button-main",attrs:{rounded:"",color:"primary",label:"Seguir"},on:{click:t.follow}}),t.pet.adotado?a("q-btn",{staticClass:"q-mt-sm button-main text-primary",attrs:{rounded:"",outline:"",label:"Adotado"},on:{click:t.desadotar}}):a("q-btn",{staticClass:"q-mt-sm button-main",attrs:{rounded:"",color:"primary",label:"ADOTAR"},on:{click:t.adotar}})],1)],1),a("q-pull-to-refresh",{on:{refresh:t.buscarPosts}},[t.msgSearching?a("h6",{staticClass:"text-center"},[t._v("Buscando...")]):t._e(),t._l(t.posts,(function(e){return a("div",{key:e.id,staticClass:"flex post q-py-md"},[a("a",{staticClass:"flex flex-center q-px-lg heading"},[a("img",{staticClass:"profile-picture-post",attrs:{alt:"Foto do Pet",src:e.foto_poster}}),a("p",{staticClass:"q-ma-none q-ml-sm"},[t._v(t._s(e.nome_poster))]),a("span",[t._v(t._s(t.formatDate(e.data_cadastro)))])]),a("article",{staticClass:"q-my-sm q-px-lg"},[t._v("\n      "+t._s(e.conteudo)+"\n    ")]),e.url_foto?a("div",{staticClass:"gallery-post"},[a("img",{attrs:{alt:"Foto do Post",src:e.url_foto},on:{dblclick:function(s){return t.toogleLike(e.id)}}}),e.liked?a("img",{staticClass:"heart-photo",attrs:{alt:"Amei",src:s("6a82")}}):t._e()]):t._e(),a("div",{staticClass:"q-px-lg q-mt-md"},[a("q-btn",{class:"like-count "+(e.liked?"liked":""),attrs:{unelevated:"",rounded:"",outline:!e.liked,color:"negative",icon:"favorite_border",label:e.qtd_amei},on:{click:function(s){return t.toogleLike(e.id)}}}),t.temAcessoPost(e)?a("q-btn",{staticClass:"float-right",attrs:{unelevated:"",outline:"",icon:"create"}},[a("q-menu",[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{on:{click:function(s){return t.abrirEdicao(e.id)}}},[t._v("Editar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{on:{click:function(s){return t.abrirRemocao(e.id)}}},[t._v("Apagar")])],1)],1)],1)],1):t._e()],1)])})),t.msgSearchingFim?a("h6",{staticClass:"text-center"},[t._v("Buscando...")]):t._e(),t.msgFim?a("h6",{staticClass:"text-center"},[t._v("Fim :)")]):t._e(),t.show_more_btn?a("div",{staticClass:"q-mt-lg text-center"},[a("q-btn",{attrs:{label:"Carregar Mais",unelevated:"",outline:""},on:{click:t.buscarMaisPosts}})],1):t._e()],2),a("q-dialog",{attrs:{value:t.show_edit_post},on:{input:function(e){return t.fecharEdicao()}}},[a("q-card",{staticStyle:{width:"480px","max-width":"80vw"}},[a("q-card-section",{staticClass:"post"},[a("div",{staticClass:"flex flex-center q-px-lg heading"},[a("img",{staticClass:"profile-picture-post",attrs:{alt:"Foto do Pet",src:t.postEdit.foto_poster}}),a("p",{staticClass:"q-ma-none q-ml-sm"},[t._v(t._s(t.postEdit.nome_poster))]),a("span",[t._v(t._s(t.formatDate(t.postEdit.data_cadastro)))])]),a("div",{staticClass:"poster"},[a("q-input",{staticClass:"q-my-sm q-px-lg",attrs:{outlined:"",autogrow:""},model:{value:t.postEdit.conteudo,callback:function(e){t.$set(t.postEdit,"conteudo",e)},expression:"postEdit.conteudo"}}),a("div",{staticClass:"q-mt-sm q-px-lg"},[t.show_add_img_edit?t._e():a("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Adicionar foto",unelevated:"",outline:""},on:{click:function(e){t.show_add_img_edit=!0}}}),t.show_add_img_edit?a("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"",label:"Link da foto"},model:{value:t.postEdit.url_foto,callback:function(e){t.$set(t.postEdit,"url_foto",e)},expression:"postEdit.url_foto"}}):t._e(),t.show_add_img_edit?a("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Cancelar",unelevated:"",outline:""},on:{click:function(e){t.show_add_img_edit=!1}}}):t._e()],1)],1),t.postEdit.url_foto&&t.show_add_img_edit?a("div",{staticClass:"gallery"},[a("img",{attrs:{alt:"Foto do Post",src:t.postEdit.url_foto}})]):t._e()]),a("q-card-actions",{staticClass:"flex justify-evenly"},[a("q-btn",{attrs:{unelevated:"",label:"Cancelar"},on:{click:t.fecharEdicao}}),a("q-btn",{attrs:{unelevated:"",color:"primary",label:"Atualizar"},on:{click:t.editarPost}})],1)],1)],1),a("q-dialog",{attrs:{value:t.show_delete_post},on:{input:function(e){return t.fecharRemocao()}}},[a("q-card",{staticStyle:{width:"480px","max-width":"80vw"}},[a("q-card-section",{attrs:{align:"center"}},[a("h5",[t._v("Você tem certeza que deseja apagar esse post?")])]),a("q-card-actions",{staticClass:"flex justify-evenly"},[a("q-btn",{attrs:{unelevated:"",label:"Cancelar"},on:{click:t.fecharRemocao}}),a("q-btn",{attrs:{unelevated:"",color:"primary",label:"Apagar"},on:{click:t.apagarPost}})],1)],1)],1)],1)},i=[],o=(s("a434"),s("e6cf"),s("a79d"),s("ddb0"),s("ded3")),r=s.n(o),n=s("bd4c"),c=s("ae2c"),l=s("a2ee"),d=s("d765");const u=d["a"].get("login");var m={name:"PetProfile",data(){return{pet:{},post_text:"",post_img:"",show_add_img:!1,show_add_img_edit:!1,show_edit_post:!1,show_delete_post:!1,show_more_btn:!1,msgPublishing:!1,msgSearching:!1,msgSearchingFim:!1,msgFim:!1,indexPagina:1,posts:[],postEdit:{},postDelete:null,loadingDetalhes:!1,detalhesPet:null}},created(){this.buscarPet(),this.buscarPosts()},methods:{formatDate(t){return n["a"].formatDate(new Date(t),"DD/MM/YYYY HH:mm")},toogleLike(t){let e=null;for(let s=0;s<this.posts.length;s++)if(this.posts[s].id===t){this.posts[s].liked?this.posts[s].qtd_amei--:this.posts[s].qtd_amei++,this.posts[s].liked=!this.posts[s].liked,e=this.posts[s].liked;break}null!==e&&(e?c["a"].like(t):c["a"].dislike(t))},temAcessoPost(t){return u.id_usuario===t.id_usuario||u.id_pet===t.id_pet},buscarPosts(t){this.msgSearching=!0,c["a"].get({pet:this.$route.query.id}).then((e=>{this.indexPagina=1,this.msgFim=!1,this.show_more_btn=!0,this.posts=e,t&&t()})).finally((()=>{this.msgSearching=!1}))},async buscarPet(){this.pet=await l["a"].get({id:this.$route.query.id}),this.pet=this.pet[0]},buscarMaisPosts(){this.msgSearchingFim=!0,this.show_more_btn=!1,this.indexPagina++,c["a"].get({pagina:this.indexPagina,pet:this.$route.query.id}).then((t=>{0===t.length?(this.msgFim=!0,this.show_more_btn=!1):(this.show_more_btn=!0,this.posts.push(...t))})).finally((()=>{this.msgSearchingFim=!1}))},abrirEdicao(t){const e=this.posts.filter((e=>e.id===t));e.length>0&&(this.postEdit=r()({},e[0]),this.show_add_img_edit=!1,this.postEdit.url_foto&&(this.show_add_img_edit=!0),this.show_edit_post=!0)},fecharEdicao(){this.show_add_img_edit=!1,this.show_edit_post=!1,this.postEdit={}},editarPost(){const t=this.postEdit.id,e={conteudo:this.postEdit.conteudo,url_foto:""};this.show_add_img_edit&&(e.url_foto=this.postEdit.url_foto);const s=r()({},this.postEdit);this.fecharEdicao();const a=this.$q.notify({message:"Atualizando..."});c["a"].atualizar(t,e).then((e=>{a(),this.$q.notify({message:"Atualizado!",color:"primary"});for(let a=0;a<this.posts.length;a++)if(this.posts[a].id===t){this.posts[a].conteudo=s.conteudo,this.posts[a].url_foto=s.url_foto;break}})).catch((()=>{a(),this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})}))},abrirRemocao(t){this.show_delete_post=!0,this.postDelete=t},fecharRemocao(){this.show_delete_post=!1,this.postDelete=null},apagarPost(){const t=this.postDelete;this.fecharRemocao();const e=this.$q.notify({message:"Apagando..."});c["a"].apagar(t).then((s=>{e(),this.$q.notify({message:"Apagado!",color:"primary"});for(let e=0;e<this.posts.length;e++)if(this.posts[e].id===t){this.posts.splice(e,1);break}})).catch((()=>{e(),this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})}))},adotar(){this.pet.adotado=1,l["a"].adotar(this.pet.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarPet()}))},desadotar(){this.pet.adotado=null,l["a"].desadotar(this.pet.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarPet()}))},follow(){this.pet.seguindo=1,l["a"].follow(this.pet.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarPet()}))},unfollow(){this.pet.seguindo=null,l["a"].unfollow(this.pet.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarPet()}))},buscarDetalhes(){this.detalhesPet||(this.loadingDetalhes=!0,l["a"].getDetalhes(this.pet.id).then((t=>{this.detalhesPet=t})).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.loadingDetalhes=!1})))}}},h=m,p=(s("db2d"),s("2877")),g=s("3b73"),_=s("f09f"),f=s("a370"),q=s("1c1c"),b=s("66e5"),v=s("4074"),w=s("0016"),P=s("0170"),y=s("74f7"),k=s("cf57"),C=s("9c40"),x=s("59d7"),E=s("4e73"),$=s("24e8"),D=s("27f9"),j=s("4b7e"),Q=s("09e3"),A=s("7f67"),F=s("eebe"),S=s.n(F),M=Object(p["a"])(h,a,i,!1,null,"4bc9e7b7",null);e["default"]=M.exports;S()(M,"components",{QExpansionItem:g["a"],QCard:_["a"],QCardSection:f["a"],QList:q["a"],QItem:b["a"],QItemSection:v["a"],QIcon:w["a"],QItemLabel:P["a"],QInnerLoading:y["a"],QSpinnerGears:k["a"],QBtn:C["a"],QPullToRefresh:x["a"],QMenu:E["a"],QDialog:$["a"],QInput:D["a"],QCardActions:j["a"],QPageContainer:Q["a"]}),S()(M,"directives",{ClosePopup:A["a"]})},a2ee:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));s("e6cf");var a=s("758b"),i=s("d765");function o(t){return a["a"].get("/pets",{params:t}).catch((t=>Promise.reject(t)))}function r(t){return a["a"].post(`/pets/${t}/like`).catch((t=>Promise.reject(t)))}function n(t){return a["a"].post(`/pets/${t}/dislike`).catch((t=>Promise.reject(t)))}function c(){return a["a"].get("/pets/caracteristicas").catch((t=>Promise.reject(t)))}function l(){return a["a"].get("/pets/meus").then((t=>(i["a"].set("pets",t),t))).catch((t=>Promise.reject(t)))}function d(t){return a["a"].post(`/pets/${t}/adotar`).catch((t=>Promise.reject(t)))}function u(t){return a["a"].post(`/pets/${t}/desadotar`).catch((t=>Promise.reject(t)))}function m(t){return a["a"].post(`/pets/${t}/follow`).catch((t=>Promise.reject(t)))}function h(t){return a["a"].post(`/pets/${t}/unfollow`).catch((t=>Promise.reject(t)))}function p(t){return a["a"].get(`/pets/${t}/detalhe`).catch((t=>Promise.reject(t)))}const g={get:o,like:r,dislike:n,getCaracteristicas:c,getMeus:l,adotar:d,desadotar:u,follow:m,unfollow:h,getDetalhes:p}},ae2c:function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));s("e6cf");var a=s("758b");async function i(t){try{return a["a"].get("/posts",{params:t})}catch(e){return await Promise.reject(e)}}async function o(t){try{return a["a"].post(`/posts/${t}/like`)}catch(e){return await Promise.reject(e)}}async function r(t){try{return a["a"].post(`/posts/${t}/dislike`)}catch(e){return await Promise.reject(e)}}async function n(t){try{return a["a"].post("/posts",t)}catch(e){return await Promise.reject(e)}}async function c(t,e){try{return a["a"].put("/posts/"+t,e)}catch(s){return await Promise.reject(s)}}async function l(t){try{return a["a"].delete("/posts/"+t)}catch(e){return await Promise.reject(e)}}const d={get:i,like:o,dislike:r,publicar:n,atualizar:c,apagar:l}},db2d:function(t,e,s){"use strict";var a=s("f2a8"),i=s.n(a);i.a},f2a8:function(t,e,s){}}]);