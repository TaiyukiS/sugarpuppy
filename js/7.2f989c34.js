(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{4336:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"flex items-center justify-center cover",style:{backgroundImage:"url("+t.user.url_capa+")"}},[a("img",{staticClass:"profile-picture",attrs:{alt:"Foto do Perfil",src:t.user.url_foto}})]),a("div",{staticClass:"q-px-lg q-mb-lg"},[a("h4",{staticClass:"text-center"},[t._v(t._s(t.user.nome))]),a("article",{staticClass:"text-center"},[t._v("\n        "+t._s(t.user.descricao)+"\n    ")]),a("div",{staticClass:"q-my-lg text-center"},[t.user.seguindo?a("q-btn",{staticClass:"q-mt-sm button-main text-primary",attrs:{rounded:"",outline:"",label:"Seguindo"},on:{click:t.unfollow}}):a("q-btn",{staticClass:"q-mt-sm button-main",attrs:{rounded:"",color:"primary",label:"Seguir"},on:{click:t.follow}})],1)]),a("q-pull-to-refresh",{on:{refresh:t.buscarPosts}},[t.msgSearching?a("h6",{staticClass:"text-center"},[t._v("Buscando...")]):t._e(),t._l(t.posts,(function(s){return a("div",{key:s.id,staticClass:"flex post q-py-md"},[a("a",{staticClass:"flex flex-center q-px-lg heading"},[a("img",{staticClass:"profile-picture-post",attrs:{alt:"Foto do Usuario",src:s.foto_poster}}),a("p",{staticClass:"q-ma-none q-ml-sm"},[t._v(t._s(s.nome_poster))]),a("span",[t._v(t._s(t.formatDate(s.data_cadastro)))])]),a("article",{staticClass:"q-my-sm q-px-lg"},[t._v("\n      "+t._s(s.conteudo)+"\n    ")]),s.url_foto?a("div",{staticClass:"gallery-post"},[a("img",{attrs:{alt:"Foto do Post",src:s.url_foto},on:{dblclick:function(e){return t.toogleLike(s.id)}}}),s.liked?a("img",{staticClass:"heart-photo",attrs:{alt:"Amei",src:e("6a82")}}):t._e()]):t._e(),a("div",{staticClass:"q-px-lg q-mt-md"},[a("q-btn",{class:"like-count "+(s.liked?"liked":""),attrs:{unelevated:"",rounded:"",outline:!s.liked,color:"negative",icon:"favorite_border",label:s.qtd_amei},on:{click:function(e){return t.toogleLike(s.id)}}}),t.temAcessoPost(s)?a("q-btn",{staticClass:"float-right",attrs:{unelevated:"",outline:"",icon:"create"}},[a("q-menu",[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{on:{click:function(e){return t.abrirEdicao(s.id)}}},[t._v("Editar")])],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[a("q-item-section",{on:{click:function(e){return t.abrirRemocao(s.id)}}},[t._v("Apagar")])],1)],1)],1)],1):t._e()],1)])})),t.msgSearchingFim?a("h6",{staticClass:"text-center"},[t._v("Buscando...")]):t._e(),t.msgFim?a("h6",{staticClass:"text-center"},[t._v("Fim :)")]):t._e(),t.show_more_btn?a("div",{staticClass:"q-mt-lg text-center"},[a("q-btn",{attrs:{label:"Carregar Mais",unelevated:"",outline:""},on:{click:t.buscarMaisPosts}})],1):t._e()],2),a("q-dialog",{attrs:{value:t.show_edit_post},on:{input:function(s){return t.fecharEdicao()}}},[a("q-card",{staticStyle:{width:"480px","max-width":"80vw"}},[a("q-card-section",{staticClass:"post"},[a("div",{staticClass:"flex flex-center q-px-lg heading"},[a("img",{staticClass:"profile-picture-post",attrs:{alt:"Foto do Usuario",src:t.postEdit.foto_poster}}),a("p",{staticClass:"q-ma-none q-ml-sm"},[t._v(t._s(t.postEdit.nome_poster))]),a("span",[t._v(t._s(t.formatDate(t.postEdit.data_cadastro)))])]),a("div",{staticClass:"poster"},[a("q-input",{staticClass:"q-my-sm q-px-lg",attrs:{outlined:"",autogrow:""},model:{value:t.postEdit.conteudo,callback:function(s){t.$set(t.postEdit,"conteudo",s)},expression:"postEdit.conteudo"}}),a("div",{staticClass:"q-mt-sm q-px-lg"},[t.show_add_img_edit?t._e():a("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Adicionar foto",unelevated:"",outline:""},on:{click:function(s){t.show_add_img_edit=!0}}}),t.show_add_img_edit?a("q-input",{staticClass:"q-mr-sm",attrs:{outlined:"",dense:"",label:"Link da foto"},model:{value:t.postEdit.url_foto,callback:function(s){t.$set(t.postEdit,"url_foto",s)},expression:"postEdit.url_foto"}}):t._e(),t.show_add_img_edit?a("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Cancelar",unelevated:"",outline:""},on:{click:function(s){t.show_add_img_edit=!1}}}):t._e()],1)],1),t.postEdit.url_foto&&t.show_add_img_edit?a("div",{staticClass:"gallery"},[a("img",{attrs:{alt:"Foto do Post",src:t.postEdit.url_foto}})]):t._e()]),a("q-card-actions",{staticClass:"flex justify-evenly"},[a("q-btn",{attrs:{unelevated:"",label:"Cancelar"},on:{click:t.fecharEdicao}}),a("q-btn",{attrs:{unelevated:"",color:"primary",label:"Atualizar"},on:{click:t.editarPost}})],1)],1)],1),a("q-dialog",{attrs:{value:t.show_delete_post},on:{input:function(s){return t.fecharRemocao()}}},[a("q-card",{staticStyle:{width:"480px","max-width":"80vw"}},[a("q-card-section",{attrs:{align:"center"}},[a("h5",[t._v("VocÃª tem certeza que deseja apagar esse post?")])]),a("q-card-actions",{staticClass:"flex justify-evenly"},[a("q-btn",{attrs:{unelevated:"",label:"Cancelar"},on:{click:t.fecharRemocao}}),a("q-btn",{attrs:{unelevated:"",color:"primary",label:"Apagar"},on:{click:t.apagarPost}})],1)],1)],1)],1)},i=[],o=(e("a434"),e("e6cf"),e("a79d"),e("ddb0"),e("ded3")),r=e.n(o),n=e("bd4c"),c=e("ae2c"),l=e("758b");function d(t){return l["a"].get("/usuarios",{params:t}).catch((t=>Promise.reject(t)))}function u(t){return l["a"].post(`/usuarios/${t}/follow`).catch((t=>Promise.reject(t)))}function h(t){return l["a"].post(`/usuarios/${t}/unfollow`).catch((t=>Promise.reject(t)))}const p={get:d,follow:u,unfollow:h};var m=e("d765");const _=m["a"].get("login");var g={name:"UserProfile",data(){return{user:{},post_text:"",post_img:"",show_add_img:!1,show_add_img_edit:!1,show_edit_post:!1,show_delete_post:!1,show_more_btn:!1,msgPublishing:!1,msgSearching:!1,msgSearchingFim:!1,msgFim:!1,indexPagina:1,posts:[],postEdit:{},postDelete:null}},created(){this.buscarUsuario(),this.buscarPosts()},methods:{formatDate(t){return n["a"].formatDate(new Date(t),"DD/MM/YYYY HH:mm")},toogleLike(t){let s=null;for(let e=0;e<this.posts.length;e++)if(this.posts[e].id===t){this.posts[e].liked?this.posts[e].qtd_amei--:this.posts[e].qtd_amei++,this.posts[e].liked=!this.posts[e].liked,s=this.posts[e].liked;break}null!==s&&(s?c["a"].like(t):c["a"].dislike(t))},temAcessoPost(t){return _.id_usuario===t.id_usuario||_.id_pet===t.id_pet},buscarPosts(t){this.msgSearching=!0,c["a"].get({id_usuario:this.$route.query.id}).then((s=>{this.indexPagina=1,this.msgFim=!1,this.show_more_btn=!0,this.posts=s,t&&t()})).finally((()=>{this.msgSearching=!1}))},async buscarUsuario(){this.user=await p.get({id:this.$route.query.id}),this.user=this.user[0]},buscarMaisPosts(){this.msgSearchingFim=!0,this.show_more_btn=!1,this.indexPagina++,c["a"].get({pagina:this.indexPagina,user:this.$route.query.id}).then((t=>{0===t.length?(this.msgFim=!0,this.show_more_btn=!1):(this.show_more_btn=!0,this.posts.push(...t))})).finally((()=>{this.msgSearchingFim=!1}))},abrirEdicao(t){const s=this.posts.filter((s=>s.id===t));s.length>0&&(this.postEdit=r()({},s[0]),this.show_add_img_edit=!1,this.postEdit.url_foto&&(this.show_add_img_edit=!0),this.show_edit_post=!0)},fecharEdicao(){this.show_add_img_edit=!1,this.show_edit_post=!1,this.postEdit={}},editarPost(){const t=this.postEdit.id,s={conteudo:this.postEdit.conteudo,url_foto:""};this.show_add_img_edit&&(s.url_foto=this.postEdit.url_foto);const e=r()({},this.postEdit);this.fecharEdicao();const a=this.$q.notify({message:"Atualizando..."});c["a"].atualizar(t,s).then((s=>{a(),this.$q.notify({message:"Atualizado!",color:"primary"});for(let a=0;a<this.posts.length;a++)if(this.posts[a].id===t){this.posts[a].conteudo=e.conteudo,this.posts[a].url_foto=e.url_foto;break}})).catch((()=>{a(),this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})}))},abrirRemocao(t){this.show_delete_post=!0,this.postDelete=t},fecharRemocao(){this.show_delete_post=!1,this.postDelete=null},apagarPost(){const t=this.postDelete;this.fecharRemocao();const s=this.$q.notify({message:"Apagando..."});c["a"].apagar(t).then((e=>{s(),this.$q.notify({message:"Apagado!",color:"primary"});for(let s=0;s<this.posts.length;s++)if(this.posts[s].id===t){this.posts.splice(s,1);break}})).catch((()=>{s(),this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})}))},follow(){this.user.seguindo=1,p.follow(this.user.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarUsuario()}))},unfollow(){this.user.seguindo=null,p.unfollow(this.user.id).catch((()=>{this.$q.notify({message:"Ops! Houve algum erro",color:"negative"})})).finally((()=>{this.buscarUsuario()}))}}},f=g,b=(e("e001"),e("2877")),q=e("9c40"),v=e("59d7"),w=e("4e73"),y=e("1c1c"),C=e("66e5"),k=e("4074"),x=e("24e8"),P=e("f09f"),E=e("a370"),$=e("27f9"),j=e("4b7e"),F=e("09e3"),S=e("7f67"),A=e("eebe"),D=e.n(A),Q=Object(b["a"])(f,a,i,!1,null,"df1e06c4",null);s["default"]=Q.exports;D()(Q,"components",{QBtn:q["a"],QPullToRefresh:v["a"],QMenu:w["a"],QList:y["a"],QItem:C["a"],QItemSection:k["a"],QDialog:x["a"],QCard:P["a"],QCardSection:E["a"],QInput:$["a"],QCardActions:j["a"],QPageContainer:F["a"]}),D()(Q,"directives",{ClosePopup:S["a"]})},"6a82":function(t,s,e){t.exports=e.p+"img/coracao.026e808e.svg"},ae2c:function(t,s,e){"use strict";e.d(s,"a",(function(){return d}));e("e6cf");var a=e("758b");async function i(t){try{return a["a"].get("/posts",{params:t})}catch(s){return await Promise.reject(s)}}async function o(t){try{return a["a"].post(`/posts/${t}/like`)}catch(s){return await Promise.reject(s)}}async function r(t){try{return a["a"].post(`/posts/${t}/dislike`)}catch(s){return await Promise.reject(s)}}async function n(t){try{return a["a"].post("/posts",t)}catch(s){return await Promise.reject(s)}}async function c(t,s){try{return a["a"].put("/posts/"+t,s)}catch(e){return await Promise.reject(e)}}async function l(t){try{return a["a"].delete("/posts/"+t)}catch(s){return await Promise.reject(s)}}const d={get:i,like:o,dislike:r,publicar:n,atualizar:c,apagar:l}},b14d:function(t,s,e){},e001:function(t,s,e){"use strict";var a=e("b14d"),i=e.n(a);i.a}}]);